(简略)

### 提交前阶段: commitMutationEffects

- 正式处理页面`dom节点删除、更新、新增`等操作。

- `commitMutationEffectsOnFiber`根据 tag 分发组件的处理

- `commitReconciliationEffects`处理协调的 Placement 情况(`Placement` 指`节点的新增与移动`)
  ```javascript
  const flags = finishedWork.flags;
  if (flags & Placement) {
    commitPlacement(finishedWork); // 提交Placement
  }
  finishedWork.flags &= ~Placement;
  ```

### commitPlacement 如何新增一个节点(由父 dom 节点操作)

- 父fiber、子fiber都可能为虚拟组件, 也就是没有`stateNode`, 我们需要找到具有真实节点`stateNode`的Host组件fiber

- `parentFiber`: 为什么需要递归往上找(`getHostParentFiber 与 isHostParent`)

- `const before = getHostSibling(finishedWork);`:
  树的搜索, 跳过中间的虚拟组件(没有stateNode的), 一边往父节点退, 一边往后续子节点延伸，嵌套的循环(所以代码特别复杂)

- `insertOrAppendPlacementNode` 的两种情况: `insertBefore` 与 `appendChild`
  有 before 则在 before 前插入该 dom 节点;
  没有 befire 则在父 dom 追加一个子节点。
