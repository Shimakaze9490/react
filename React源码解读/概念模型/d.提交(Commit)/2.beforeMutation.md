(简略)

### 提交前阶段: commitBeforeMutationEffects

- 依然是`commitBeforeMutationEffects_begin`与`commitBeforeMutationEffects_complete`递归,
  `commitBeforeMutationEffectsOnFiber`分发具体的处理函数。

- 处理事件: `focuse与blur` 需要在比较早的时机处理。

- class 组件执行`getSnapshotBeforeUpdate` `componentWillUpdate`生命周期 / HostRoot 根组件清理内容等

### 两种处理 effectList 的遍历方式

- 两种数据结构处理 effct: 一种是遍历链表 / 一种是遍历 fiber 树 (在不同版本这两者会有不同)

- 遍历链表: 模型更简单、效率更高

- 遍历 fiber 树: 为了支持新特性 `Suspense` `Offscreen`, 需要遍历子树 (开始了重构 effectList)

### flushPassiveEffects 遍历

- 先 Unmount: `commitPassiveUnmountEffects`, 执行`delections` `destroy`

- 后 Mount: `commitPassiveMountEffects --> commitPassiveMountOnFiber`, 执行`create`

- `commitHookEffectListMount` 筛选本次需要执行 effect 的类型
  ```javascript
  if ((effect.tag & flags) === flags) {
    var create = effect.create;
    effect.destroy = create();
  }
  ```
