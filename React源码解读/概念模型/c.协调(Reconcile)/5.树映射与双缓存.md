### dom 树到虚拟树

- 真实 dom 树映射到 fiber 树, 需要一致的简洁的节点模型和关系: `child` `sibling`
  (额外添加了`return`指针, 指回父节点)

- 关键问题是: 如何将任意一颗树(多叉树), 转换为二叉树?

- 转换原理<font color="red" size="4">左孩子右兄弟</font>: 左指针指向第一个子孩子, 右指针指向相邻的兄弟节点

  <img src="./imgs/fiber树结构.png" />

  <img src="./imgs/fiber关系链.png" />

### 双缓存的提出

- 核心思想: <font color="green" size="4">空间换时间, 每次保留上一次的虚拟树的快照, 用以最快速度计算出新虚拟树快照</font>
  所以同一时刻内存中最多存在两颗 fiber 树, 分别叫 `current` 和 `workInProgress`

- 关注这些变量: `current` `alternate` `workInProgress` `finishedWork`

- 双缓存的切换: 查看 `2.commitMutation.md`

- 更多的执行过程看: `6.模拟递归和DFS.md`
